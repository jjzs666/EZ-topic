(self.webpackChunklms=self.webpackChunklms||[]).push([[50818],{789785:e=>{e.exports=["$rootScope","$scope","$timeout",function(e,t,i){return i((function(){if(e.org)return e.org.copyright=t.copyright,e.org.filing_number=t.filingNumber}))}]},786995:(e,t,i)=>{var r=i(904072),n=i(708468);i(969826),i(821249),i(747042),i(891058),e.exports=["$rootScope","$scope","$routeParams","$http","$window","toastr",function(e,t,i,o,a,s){var u=r("#courseId").val(),c=r("#orgId").val(),d="True"===r("#isVisitor").data("value"),l=r("#userId").data("id");t.ui={showList:!1,inList:!1,showNavigationList:!1,inNavigationList:!1,showOperList:!1,inOperList:!1,showAppQRCode:!1,inAppQRCode:!1,showManualList:!1,inManualList:!1,showNavbarList:!1,inNavbarList:!1},e.org={name:"",logoUrl:""},t.getOrgName=function(){return e.orgName||(e.orgName=t.orgName),e.orgName},t.getOrgLogo=function(){return e.orgLogoUrl||(e.orgLogoUrl=t.orgLogoUrl),e.orgLogoUrl},t.getOrgShowName=function(){return e.orgShowName||(e.orgShowName=t.orgShowName),e.orgShowName},t.getOrgShowLogo=function(){return e.orgShowLogo||(e.orgShowLogo=t.orgShowLogo),e.orgShowLogo},t.toggleCalendar=function(){return WebuiPopovers.hideAll(),r(".webui-popover.webui-popover-calendar.webui-no-padding.in").hide(),t.showCalendar=!t.showCalendar,t.showCalendar?r("body").css("overflow","hidden"):r("body").css("overflow","auto"),null},t.changeLanguage=function(e){var t={language:e};return d?(r.cookie("lang",e),a.location.reload()):o.put("/api/user/language",t).success((function(){return r.removeCookie("lang",{path:"/"}),a.location.reload()})).error((function(e){return s.warning(e.errors)}))},t.showLangList=function(){return r(".languages .entry").focus(),t.ui.showList=!0},t.hideLangList=function(){return t.ui.showList=t.ui.inList},t.showNavigationList=function(){return r(".navigation .entry").focus(),t.ui.showNavigationList=!0},t.hideNavigationList=function(){if(!t.ui.inNavigationList)return t.ui.showNavigationList=!1},t.showUserOperationList=function(){return r(".profile .entry").focus(),t.ui.showOperList=!0},t.hideUserOperationList=function(){if(!t.ui.inOperList)return t.ui.showOperList=!1},t.showAppQRCode=function(){return r(".app .entry").focus(),t.ui.showAppQRCode=!0},t.hideAppQRCode=function(){if(!t.ui.inAppQRCode)return t.ui.showAppQRCode=!1},t.showManualList=function(){return r(".manual .entry").focus(),t.ui.showManualList=!0},t.hideManualList=function(){if(!t.ui.inManualList)return t.ui.showManualList=!1},t.goToFAQ=function(t){a.open(t+"?lang=".concat(e.lang))},t.showNavbarList=function(){return r(".nav-bar .entry").focus(),t.ui.showNavbarList=!0},t.hideNavbarList=function(){t.ui.inNavbarList||t.ui.touchList?t.ui.touchList?(r(".nav-bar .entry").focus(),t.ui.touchList=!1):r(".nav-bar .entry").focus():t.ui.showNavbarList=!1},t.$on("clickManualListItem",(function(){return t.ui.showManualList=!1})),t.openTrialPopup=function(){return r("#create-trial-student-popup").foundation("reveal","open"),e.$broadcast("openCreateTrialStudentPopup",!1),!1};var f=function(e,t){u=parseInt(u);var i=n.find(t,{courseId:u});i?i.updateTime=n.now():t.push({courseId:u,updateTime:n.now()});var r=n.map(n.sortBy(t,(function(e){return-e.updateTime})).slice(0,6),"courseId");if(!d&&!n.isEqual(r,e))return window.localStorage.setItem("visitedCoursesInfo",JSON.stringify(t)),window.localStorage.setItem("visitedCourseOrderList",JSON.stringify(r)),o.put("/api/user/recently-visited-courses",r)};t.$watch("courseId",(function(){return function(){if(u&&l){var e=JSON.parse(window.localStorage.getItem("visitedCourseOrderList")),t=JSON.parse(window.localStorage.getItem("visitedCoursesInfo")),i=parseInt(window.localStorage.getItem("visitedCoursesUser"));return e&&t&&i===parseInt(l)?f(e,t):o.get("/api/user/recently-visited-courses").success((function(i){var r=i.visited_courses;e=n.map(r,"id"),t=[];for(var o=0;o<e.length;o++)u=e[o],t.push({courseId:u,updateTime:n.now()-10*o});return window.localStorage.setItem("visitedCoursesInfo",JSON.stringify(t)),window.localStorage.setItem("visitedCourseOrderList",JSON.stringify(e)),window.localStorage.setItem("visitedCoursesUser",l),f(e,t)}))}}()}));return function(){if(d&&c)return o.get("/anonymous-api/orgs/".concat(c,"/login-settings")).success((function(e){return t.loginSettings=e.login_settings}))}()}]},766832:(e,t,i)=>{var r=i(708468),n=i(730381),o=i(904072),a=i(963764);function s(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}i(892222),i(969826),i(489554),i(226699),i(279753),i(569600),i(821249),i(185827),i(747042),i(583710),i(968309),i(209653),i(241539),i(454678),i(891058),i(974916),i(339714),i(132023),i(804723),i(323123),i(454747);var c=i(693604).replaceActivityTypeKey;e.exports=["$window","onlineVideoCompletenessRepository",function(e,t){var i=function(e,t){var i="learning_activity";return"exam"===t.type&&(i="exam_activity"),"classroom"===t.type&&(i="classroom_activity"),r.any(e,{activity_id:t.id,activity_type:i,completeness:"full"})},u=function(e,t,i){return e.chapter.module_id=t,e.chapter.syllabus_id=i},d=function(e,t,i,n,o,a,s){if(e.showSelect2=!1,(e.hideDefaultModuleTitle||t.hideDefaultModuleTitle)&&!n&&i.modules.length>0&&(n=i.modules[0].id),t.chapter={id:"0"},i.syllabus_enabled)if(o)t.chapter.id="syllabus_".concat(o),u(t,n,o);else if(n)t.chapter.id="module_".concat(n),u(t,n,0);else if(s&&t.isInSyllabusPage){var c=r.last(i.modules);if(r.isEmpty(c.syllabuses))t.chapter.id="module_".concat(c.id),u(t,c.id,0);else{var d=r.last(c.syllabuses);t.chapter.id="syllabus_".concat(d.id),u(t,c.id,d.id)}}return a((function(){return e.showSelect2=!0}))},l=function(e,t,i){return e.push({title:"".concat(t.title),key:"".concat(t.unique_key),id:t.id,optionType:"activity",type:t.type,completionCriterion:t.completion_criterion,isAvailable:f(t,i)})},f=function(e,t){return!r.isEmpty(e.completion_criterion)&&!r.find(t,{activity_id:e.id,activity_type:e.type})},p=function(e){return!["classroom","feedback"].includes(e.type)&&("forum"!=e.type||"crossCourse"!==e.data.participation_scope)},v=function(e,t,i,r,n){return function(){var o,a,u=[],c=s(t);try{for(c.s();!(o=c.n()).done;)a=void 0,a=o.value,e.activityHasPrerequisite(a)?u.push(function(){var t,o=[],u=s(a.prerequisites);try{for(u.s();!(t=u.n()).done;){var c=t.value;c.activity_id===i.id&&c.activity_type===i.type&&(n===e.notScored&&[e.forumNoneCompletedInfo,e.homeworkNoneCompletedInfo].includes(c.completion_criterion.completion_info)||n!==e.notScored)?(c.completion_criterion.has_completed=r,o.push(c.completion_criterion.completion_info=n)):o.push(void 0)}}catch(e){u.e(e)}finally{u.f()}return o}()):u.push(void 0)}catch(e){c.e(e)}finally{c.f()}return u}()},y=function(e,t){var i=r.findWhere(e,{id:t.id,type:t.type});if(i)return i.prerequisites=t.prerequisites};return{modulesAndSyllabuses:function(e){var t=r.sortBy(e.modules,"sort");return r.reduce(t,(function(e,t){return r.isEmpty(t.name)&&r.isEmpty(t.activities)&&r.isEmpty(t.syllabuses)||(e.push({name:t.name,id:t.id,type:"module",value:"module_".concat(t.id),moduleId:t.id}),r.map(t.syllabuses,(function(i){return e.push({name:"".concat(i.summary),id:i.id,type:"syllabus",moduleId:t.id,syllabusId:i.id,value:"syllabus_".concat(i.id)})}))),e}),[])},getPreActivities:function(e,t){var i=r.sortBy(e.modules,"sort");return r.reduce(i,(function(e,i){return r.isEmpty(i.activities)||(e.push({title:i.name,id:i.id,optionType:"module",isAvailable:!1}),function(e,t,i){console.log("111"),r.map(r.sortBy(e.directActivities,"sort"),(function(e){return p(e)?l(i,e,t):i})),r.map(e.syllabuses,(function(e){return r.isEmpty(e.activities)?i:(i.push({title:"".concat(e.summary),id:e.id,optionType:"syllabus",isAvailable:!1}),r.map(r.sortBy(e.activities,"sort"),(function(e){return p(e)?l(i,e,t):i})))}))}(i,t,e)),e}),[])},syllabuses:function(e){return r.reduce(e.modules,(function(e,t){return r.each(t.syllabuses,(function(i){var r={id:i.id,module_name:t.name,ref:i};return e.push(r)})),e}),[])},showSyllabusSubItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){if(e.show)return!0}else if(e.activities&&e.activities.length>0)return!0;return!1},getBelongTo:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(!e)return"";var o=[e.department,e.grade];return(null===(t=window.globalData)||void 0===t||!t.isOpenUniversity||null!==(i=window.globalData)&&void 0!==i&&i.courseRoles.includes("student_manager"))&&o.push(e.klass),r.compact(r.map(r.compact(o),"name")).join(n)},calcProgress:function(e){var t=function(e){return e+1},i=n.utc(e.start_date),r=n.utc(e.end_date),o=n.utc();if(o<i)return e.status="notStarted",void(e.progress=0);if(o>r)return e.status="closed",void(e.progress=100);e.status="ongoing";var a=t(r.diff(i,"days")),s=t(o.diff(i,"days"));return e.progress=Math.floor(100*s/a)},calcProgressByDates:function(e){var t=function(e){return e+1};return r.each(e,(function(e){return e.progress=function(e){var i=n.utc(e.start_date),r=n.utc(e.end_date),o=n.utc();if(o<i)return e.status="notStarted",0;if(o>r)return e.status="closed",100;e.status="ongoing";var a=t(r.diff(i,"days")),s=t(o.diff(i,"days"));return Math.floor(100*s/a)}(e)}))},initCourseExtraInfo:function(e){if(e.introductionUrl="/course/".concat(e.id),e.registered&&"notStarted"===e.status?e.url=e.introductionUrl:e.url="/course/".concat(e.id,"/content"),e.instructorNames=r.map(e.instructors,"name").join(" / "),e.durationAsWeeks=n(e.end_date).diff(n(e.start_date),"weeks")+1,e.passedAsWeeks=e.durationAsWeeks,e.is_closed||(e.passedAsWeeks=n().diff(n(e.start_date),"weeks")+1),e.is_started||(e.passedAsWeeks=0),e.passedAsWeeks.toString().length<2&&(e.passedAsWeeks="0"+e.passedAsWeeks),e.durationAsWeeks.toString().length<2&&(e.durationAsWeeks="0"+e.durationAsWeeks),!r.isEmpty(e.lesson_info_lst)){var t={start_time:void 0,end_time:void 0};e.lesson_info_lst.forEach((function(e){var i,r,n=null===(i=e.lesson_slot_info)||void 0===i?void 0:i.start_time,o=null===(r=e.lesson_slot_info)||void 0===r?void 0:r.end_time;t.start_time=t.start_time&&t.start_time<n?t.start_time:n,t.end_time=t.end_time&&t.end_time>o?t.end_time:o})),e.timeSlotRange=t}return e.durationAsWeeksInNum=parseInt(e.durationAsWeeks,10)},isActivityRead:i,addLearningActivityRead:function(e,t){if(Array.isArray(e))return e.push({activity_id:t.id,activity_type:"learning_activity",completeness:"full"})},refreshActivitiesReadForMaterialActivity:function(e,t){return r.remove(e,{activity_id:t.activity_id,activity_type:"learning_activity"}),e.push({activity_id:t.activity_id,activity_type:"learning_activity",completeness:t.completeness})},refreshPrerequisitesStatus:function(e,t,i,r){return function(){var n,o=[],a=s(t.course.modules);try{for(a.s();!(n=a.n()).done;){var u=n.value;v(t,u.directActivities,e,i,r),o.push(u.syllabuses.map((function(n){return v(t,n.activities,e,i,r)})))}}catch(e){a.e(e)}finally{a.f()}return o}()},getActivityIcon:function(e,t,r){var n=c(e.type),o="";o=i(t,e)||r?"-read":o,o=this.activityExpired(e)?"-expired":o;var a=e.active?"-active":"";return"icon-syllabus-".concat(n).concat(a).concat(o)},getActivityGreyIcon:function(e){var t=c(e.type);return"material"===t&&"PPT"==e.data.material_type?"font-syllabus-interaction":"font-syllabus-".concat(t)},isFormativeTask:function(e){return!!e&&("online_video"===e.type?Number(t.setting.score_percentage)>0&&(t.setting.include_none_criterion||e.completion_criterion):!!(e.score_percentage&&parseFloat(e.score_percentage)>0)&&!e.is_final)},isFinalTask:function(e){return(null==e?void 0:e.is_final)||!1},getActivityI18nMessage:function(e,t){return"material"!==e.type?t[e.type]:"PPT"===e.data.material_type?"PPT":t[e.type]},activityExpired:function(e){return["homework","interaction"].includes(e.type)?e.submission_closed:e.is_closed},activityUpcoming:function(e){if(e)return!e.is_started},activityFinish:function(e){return"homework"===e.type&&"submitted"===e.status_code},activityOBERelated:function(e){var t;return!(null===(t=window.featureToggles)||void 0===t||!t.outcomeBasedEducation||!e)&&e.obe_tag},lessonDuration:function(e,t){return n(t).diff(n(e),"seconds")},videoDuration:function(e){if(!e)return 0;if(r.any(e,{status:"failed"}))return-2;if(r.any(e,{status:"processing"}))return-1;var t=r.reduce(e,(function(e,t){return e+r.reduce(t.videos,(function(e,t){return e+parseFloat(t.duration)}),0)}),0);return Math.round(t)},activityUrl:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;if(i){var n="/course/".concat(t,"/learning-activity/full-screen#/").concat(e.id);return void 0!==r&&(n+="/topics/".concat(r)),["exam","classroom","feedback","questionnaire","live_record","select_student","race_answer","number_rollcall","qr_rollcall"].includes(e.type)&&(n="/course/".concat(t,"/learning-activity/full-screen#/")+e.type+"/".concat(e.id)),n}switch(e.type){case"exam":case"classroom":case"feedback":case"questionnaire":return"/course/".concat(t,"/learning-activity#/")+e.type+"/".concat(e.id);default:return"/course/".concat(t,"/learning-activity#/").concat(e.id)}},activityPopupName:function(e){return c(e.type)},initChapterId:function(e,t,i,n){if(e.chapter={id:"0"},n){if(n.syllabus_id)return e.chapter.id="syllabus_".concat(n.syllabus_id);if(n.module_id)return e.chapter.id="module_".concat(n.module_id)}else{if(t.syllabus_id)return e.chapter.id="syllabus_".concat(t.syllabus_id);if(t.module_id)return e.chapter.id="module_".concat(t.module_id);if(e.isInSyllabusPage){var o=r.last(i.modules);if(r.isEmpty(o.syllabuses))return e.chapter.id="module_".concat(o.id);var a=r.last(o.syllabuses);return e.chapter.id="syllabus_".concat(a.id)}}},createActivity:function(e,t,i,r,n,o,a){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return e.courseCode=i.course_code,e.activityType=a,d(e,t,i,r,n,o,!0),e.$broadcast("bind".concat(a,"ForNew"),{course:i,moduleId:r,syllabusId:n,activityType:a,showSelectActivity:s})},editActivity:function(e,t,i,n,o,a,s){e.courseCode=i.course_code,e.activityType=s.type,d(e,t,i,n,o,a,!1);var u=r.map(s.type.split("_"),(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}));return e.$broadcast("bind".concat(u.join(""),"ForEdit"),s)},editModule:function(e,t,i,n){e.editing=!0;var a=e.name,s=function n(s){if("keydown"===s.type){if(27!==s.keyCode&&13!==s.keyCode)return}else if(s.target===o("input.module-name-edit")[0])return;if(s.stopPropagation(),!e.updating){delete e.editing;var u=function(t){return delete e.updating,e.id||(e.id=t.id),o("body")[0].removeEventListener("click",n,!0),o("body")[0].removeEventListener("keydown",n)},c=function(){return delete e.updating,e.name=a,e.id||r.remove(i.course.modules,e),o("body")[0].removeEventListener("click",n,!0),o("body")[0].removeEventListener("keydown",n)};return e.name&&e.name!==a&&27!==s.keyCode?(e.id?t.updateModule(e,u,c):t.addModule(e,u,c),e.updating=!0):(e.name=a,e.id||r.remove(i.course.modules,e),o("body")[0].removeEventListener("click",n,!0),o("body")[0].removeEventListener("keydown",n)),i.$apply()}};return n((function(){return o("body")[0].addEventListener("click",s,!0),o("body")[0].addEventListener("keydown",s),o("input.module-name-edit").focus()}))},showSlide:function(t){return e.open("/user/slides/".concat(t),"_blank"),!0},canEditSelectedRubric:function(e,t){return t>0&&function(e,t){var i;if(!e)return!1;var n=r.pluck(e,"id");return i=parseInt(t),n.includes(i)}(e.rubrics,t)&&!e.ui.disableSelectRubric},rubricChanged:function(e){e.homework&&(-1===e.homework.rubric_id?e.$broadcast("openRubricPopup",-1,"add"):e.homework.rubric=r.find(e.rubrics,{id:parseInt(e.homework.rubric_id)}))},intraRubricChanged:function(e){-1===e.homework.intra_rubric_id?e.$broadcast("openRubricPopup",-1,"addIntra"):e.homework.intra_rubric=r.find(e.rubrics,{id:parseInt(e.homework.intra_rubric_id)})},handleHomeworkFormErrors:function(e){e.errors;return e.ui.showHomeworkAdvanced=!0},getDependantActivities:function(e,t,i){var r,n=[],o=function(t){if(i.activityHasPrerequisite(t))return function(){var i,r=[],o=s(t.prerequisites);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.activity_id===e.id&&a.activity_type===e.type?r.push(n.push(t)):r.push(void 0)}}catch(e){o.e(e)}finally{o.f()}return r}()},a=s(t.modules);try{for(a.s();!(r=a.n()).done;){var u,c=r.value,d=s(c.directActivities);try{for(d.s();!(u=d.n()).done;)o(u.value)}catch(e){d.e(e)}finally{d.f()}var l,f=s(c.syllabuses);try{for(f.s();!(l=f.n()).done;){var p,v=s(l.value.activities);try{for(v.s();!(p=v.n()).done;)o(p.value)}catch(e){v.e(e)}finally{v.f()}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){a.e(e)}finally{a.f()}return n},changeInfoOfDependantActivities:function(e,t){return e.map((function(e){return function(){var i,r=[],n=s(e.prerequisites);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.activity_id===t.id&&o.activity_type===t.type?(o.completion_criterion.criterion_text=t.completion_criterion,r.push(o.title=t.title)):r.push(void 0)}}catch(e){n.e(e)}finally{n.f()}return r}()}))},getDependantActivity:function(e,t,i,n,o){return function(){var u,c=[],d=s(e);try{for(d.s();!(u=d.n()).done;){var l=u.value;r.findWhere(t,{id:l.id,type:l.type})&&o.activityHasPrerequisite(l)?c.push(function(){var e,t=[],o=s(a.copy(l.prerequisites));try{for(o.s();!(e=o.n()).done;){var u=e.value;u.activity_id===i.id&&u.activity_type===i.type?(r.remove(l.prerequisites,u),t.push(n.push({activity_id:l.id,activity_type:l.type}))):t.push(void 0)}}catch(e){o.e(e)}finally{o.f()}return t}()):c.push(void 0)}}catch(e){d.e(e)}finally{d.f()}return c}()},getUnusedPrerequisites:function(e,t){console.log("222");var i,n=[],o=s(a.copy(e.prerequisites));try{for(o.s();!(i=o.n()).done;){var u,c=i.value;c.key||(c.key="".concat(c.activity_type,"-").concat(c.activity_id)),u=c.key,r.map(t,"key").includes(u)||(n.push({activity_id:c.activity_id,activity_type:c.activity_type}),r.remove(e.prerequisites,c))}}catch(e){o.e(e)}finally{o.f()}return n},resetChapter:function(e){var t=r.find(e.modulesAndSyllabuses,{value:e.chapter.id});return e.chapter.module_id=t?t.moduleId:0,e.chapter.syllabus_id=t&&t.syllabusId?t.syllabusId:0},activityHasCriterion:function(e){return["exam","homework","forum","online_video"].includes(e.type)&&e.completion_criterion&&e.completion_criterion.match(/\d{1,3}/)},getCriterion:function(e){return parseInt(e.completion_criterion.match(/\d{1,3}/)[0])},calculateCompletenessForHasCriterionActivity:function(e,t){if(e.data){if("reviewed"===t.completion_criterion_key)return"full"!==e.completeness?.1:function(e){return"homework"===e.type&&(e.inter_score_map&&e.inter_score_map.id||e.intra_score_map&&e.intra_score_map.id)}(t)?e.data.reviewed?e.data.reviewed:.1:100;if(e.data.completeness)return e.data.completeness>=t.criterion?100:e.data.completeness;if(e.data.score)return e.data.score>=t.criterion?100:Math.round(100*e.data.score/t.criterion)}else{if("online_video"!==t.type)return.1;if("full"===e.completeness)return 100}},updateCriterionInfoForActivities:function(e,t){return t.map((function(t){return e.modules.map((function(e){return function(){var i,r=[],n=s(e.directActivities);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.id===t.id&&o.type===t.type&&(t.prerequisites=o.prerequisites),r.push(e.syllabuses.map((function(e){return function(){var i,r=[],n=s(e.activities);try{for(n.s();!(i=n.n()).done;)(o=i.value).id===t.id&&o.type===t.type?r.push(t.prerequisites=o.prerequisites):r.push(void 0)}catch(e){n.e(e)}finally{n.f()}return r}()})))}}catch(e){n.e(e)}finally{n.f()}return r}()}))}))},deleteActivityFromCourse:function(e,t){if(r.remove(e.activities,{id:t.id,type:t.type}),t.module_id)return function(){var i,n=[],o=s(e.modules);try{for(o.s();!(i=o.n()).done;){var u,c,d=i.value,l=s(a.copy(d.directActivities));try{for(l.s();!(c=l.n()).done;)(u=c.value).id===t.id&&u.type===t.type&&(r.remove(d.activities,u),r.remove(d.directActivities,u))}catch(e){l.e(e)}finally{l.f()}n.push(d.syllabuses.map((function(e){return function(){var i,n=[],o=s(a.copy(e.activities));try{for(o.s();!(i=o.n()).done;)(u=i.value).id===t.id&&u.type===t.type?(r.remove(d.activities,u),n.push(r.remove(e.activities,u))):n.push(void 0)}catch(e){o.e(e)}finally{o.f()}return n}()})))}}catch(e){o.e(e)}finally{o.f()}return n}()},refreshPrerequisitesForDependantActivities:function(e,t,i){return i.map((function(i){return function(){var n,o=[],a=s(e);try{for(a.s();!(n=a.n()).done;){var u=n.value;i.id===u.activity_id&&i.type===u.activity_type?o.push(r.remove(i.prerequisites,(function(e){return e.activity_id===t.id&&e.activity_type===t.type}))):o.push(void 0)}}catch(e){a.e(e)}finally{a.f()}return o}()}))},refreshPrerequisitesForAllDependantActivities:function(e,t){return function(){var i,n=[],o=s(e.modules);try{for(o.s();!(i=o.n()).done;){var a,u,c=i.value,d=s(c.directActivities);try{for(d.s();!(u=d.n()).done;)a=u.value,r.remove(a.prerequisites,(function(e){return e.activity_id===t.id&&e.activity_type===t.type}))}catch(e){d.e(e)}finally{d.f()}n.push(c.syllabuses.map((function(e){return function(){var i,n=[],o=s(e.activities);try{for(o.s();!(i=o.n()).done;)a=i.value,n.push(r.remove(a.prerequisites,(function(e){return e.activity_id===t.id&&e.activity_type===t.type})))}catch(e){o.e(e)}finally{o.f()}return n}()})))}}catch(e){o.e(e)}finally{o.f()}return n}()},removeOldActivity:function(e,t){var i=function(e){return!!e&&(e.id===t.id&&(e.type=t.type))};return r.remove(e.activities,i),r.remove(e.directActivities,i),r.each(e.syllabuses,(function(e){return r.remove(e.activities,i)}))},addNewActivity:function(e,t){if(t.id===e.module_id){if(t.activities=t.activities||[],t.activities.push(e),!e.syllabus_id)return t.directActivities=t.directActivities||[],t.directActivities.push(e);var i=r.find(t.syllabuses,{id:e.syllabus_id});if(i)return i.activities=i.activities||[],i.activities.push(e)}},refreshPrerequisitesForCurrentActivity:function(e,t,i){return y(t,e),y(i.activities,e),function(){var t,r=[],n=s(i.modules);try{for(n.s();!(t=n.n()).done;){var o=t.value;y(o.directActivities,e),r.push(o.syllabuses.map((function(t){return y(t.activities,e)})))}}catch(e){n.e(e)}finally{n.f()}return r}()}}}]},635224:(e,t,i)=>{var r=i(730381),n=i(904072);t.datetime=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY.MM.DD HH:mm";r.locale(n("html").attr("lang"));var i=r(e);return i.isValid()?i.format(t):e}},t.time=function(){return function(e){r.locale(n("html").attr("lang"));var t=r(e);return t.isValid()?t.format("HH:mm"):e}},t.date=function(){return function(e,t){t||(t="YYYY.MM.DD"),r.locale(n("html").attr("lang"));var i=r(e);return i.isValid()?i.format(t):e}}}}]);