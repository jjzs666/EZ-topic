(self.webpackChunklms=self.webpackChunklms||[]).push([[93604],{203494:(t,e,n)=>{var i=n(708468);n(821249),n(974916),n(804723);var r=[],o=!!window.navigator&&Boolean(window.navigator.userAgent.match(/iPad|iPhone/i));window[o?"onpagehide":"onbeforeunload"]=function(){i.map(r,(function(t){return t()}))};t.exports=function(t){return r.push(t)}},293789:(t,e,n)=>{"use strict";function i(t,e,n){for(var i=[],r=t<e,o=n?r?e+1:e-1:e,a=t;r?a<o:a>o;r?a++:a--)i.push(a);return i}function r(t,e){return null!=t?e(t):void 0}n.r(e),n.d(e,{range:()=>i,guard:()=>r})},693604:(t,e,n)=>{var i=n(293789),r=n(904072),o=n(993776),a=n(708468);function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=d(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n(969826),n(491038),n(226699),n(682772),n(569600),n(294986),n(821249),n(583710),n(968309),n(556977),n(319601),n(369070),n(454678),n(891058),n(974916),n(978783),n(115306),n(323123),n(229254),n(932564);var f=n(203494),p=n(933704);n(816414);var v=n(730381),h=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(-1!==t.indexOf(".")){var n=t.split(".").pop();return e?n.toLowerCase():n}return t},m=function(t){if(t){if(t.is_folder)return"folder";if("link"===t.type)return w(t.link);var e=h(t.name||t.file_name||"",!0),n=t.type;return"folder"===n?"folder":["video-quiz","lesson-resource","other"].includes(n)?"video":["video","image","audio","scorm","evercam","swf","folder"].includes(n)?n:["doc","docx","dot","dotx"].includes(e)?"word":["xls","xlsx","xlt","xltx","csv"].includes(e)?"excel":"pdf"===e?"pdf":["ppt","pptx","pps","ppsx"].includes(e)?"ppt":"document"}},g=function(t,e,n,r,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d=(null!=e?e.videoDuration:void 0)||(null!=u?u.videoDuration:void 0),c=i.guard(null!=e?e.uploads:void 0,(function(t){return t[0]}))||(null!=u?u.upload:void 0);if(n>r&&(r=n),!(r-n<2&&d>2)){var l=Math.round(r),f=Math.round(n),p=0;if("audio"===o)e&&t.logAudioPlayed&&t.logAudioPlayed(e.id,f,l,d);else if(null!=e?e.log_youtube_video:void 0)t.logExternalVideoPlayed(e.id,f,l,a,s);else{e&&t.logVideoPlayed({activityId:e.id,startFrom:f,endAt:l,async:a});var v=!(!i.guard(null!=e?e.data:void 0,(function(t){return t.other_resources}))&&!i.guard(null!=e?e.data:void 0,(function(t){return t.other_resource})));c&&c.id?p=c.id:(null!=e?e.interaction_activity_attributes:void 0)&&e.interaction_activity_attributes.video_quiz.uploads&&!v&&(p=e.interaction_activity_attributes.video_quiz.uploads[0].id)}var h=l-f;return e?st.track(null!=e?e.type:void 0,"play",{activity_id:e.id,upload_id:p},{start_at:f,end_at:l,duration:h}):u?y(u,f,l,h,p):void 0}},y=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a={start_at:e,end_at:n,duration:r,resource_id:t.id,org_id:t.org_id,dep_id:(null!=t.department?t.department.id:void 0)||0,first_class_id:i.guard(null!=t.classification_dict?t.classification_dict.first:void 0,(function(t){return t.id}))||0,second_class_id:i.guard(null!=t.classification_dict?t.classification_dict.second:void 0,(function(t){return t.id}))||0,third_class_id:i.guard(null!=t.classification_dict?t.classification_dict.third:void 0,(function(t){return t.id}))||0,upload_id:o,upload_type:i.guard(null!=t.upload?t.upload.link:void 0,(function(t){return t.type}))||(null!=t.upload?t.upload.type:void 0)};return window.st.track("shared_resource","play",{},a)},_=function(t){return"function"==typeof t.currentTime?t.currentTime():"number"==typeof t.currentTime?t.currentTime:t[0]&&t[0].currentTime?t[0].currentTime:0},w=function(t){return t&&t.is_video_link?"video-link":"link"},b=/(https?:\/\/)?(\/\/)?(www\.)?(youtube|youtu|youtube-nocookie)\.(com|be)\/(watch\?v=|embed\/|v\/|.+\?v=)?([a-zA-Z0-9_-]{11})/,k=/(https?:\/\/)?((www|v)\.)?youku\.com\/v_show\/id_(((\w+)(_\w{2}_\d{1})?)|(\w+=*)).html.*/,I=/https?:\/\/?player\.youku\.com\/embed\/(\w+=*)/,x=/microsoftstream\.com(\/embed)?\/video\/([a-zA-Z0-9]{8}-([a-zA-Z0-9]{4}-){3}[a-zA-Z0-9]{12})/,T=/https:\/\/www\.microsoft\.com\/[a-zA-Z]*-[a-zA-Z]*\/videoplayer\/embed\/[a-zA-Z0-9]*/,S=/(?:http|https)?:?\/?\/?(?:www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|video\/|)(\d+)(?:|\/\?)/,C=[b,k,I,/https?:\/\/?www\.?tudou\.com\/programs\/view\/([\w-]{11})/,/https?:\/\/?www\.?tudou\.com\/(albumplay|listplay)\/([\w-]{11})\/([\w-]{11}).html/,/https?:\/\/?www\.?tudou\.com\/programs\/view\/html5embed\.action\?type=([0-2])&code=([\w-]{11})&lcode=([\w-]{11})?/,/http:\/\/tv\.sohu\.com\/upload\/static\/share\/share_play\.html#(\d+_\d+_\d+_\d+_\d)/,/https?:\/\/v\.163\.com\/swf\/video\/NetEaseFlvPlayerV3.swf\?topicid=\d+&vid=(\w+)&sid=\w+/,/https?:\/\/swf\.ws\.126\.net\/openplayer\/v02\/.+\.swf/,x,T,S],A=["avi","wmv","mov","mp4","mpg","rm","rmvb","mkv","webm","flv","mp3","wma","wav","m4a","3gpp","3gp","jpg","jpeg","png","webp","gif","bmp","txt","doc","docx","ppt","pptx","xls","xlsx","csv","pdf","rtf","odt","odp","ods","swf","zip","rar","tar","heic","m4v"],j=function(){"use strict";function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=0}var e,n,i;return e=t,(n=[{key:"running",value:function(){return 0!==this._id}},{key:"start",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(!this.running())return this._id=window.setInterval(t,e)}},{key:"stop",value:function(){if(this.running())return window.clearInterval(this._id),this._id=0}}])&&l(e.prototype,n),i&&l(e,i),t}();t.exports={YOUTUBE_LINK_REGEX:b,formatTime:function(t){v.locale(r("html").attr("lang")),(!t||t<0)&&(t=0);var e=v.duration(1e3*t),n=e.hours()+24*e.days();return n<10&&(n="0"+n),n+":"+(e.minutes()<10?"0"+e.minutes():e.minutes())+":"+(t=e.seconds()<10?"0"+e.seconds():e.seconds())},formatScore:function(t){if(!t||isNaN(t))return t;var e=String(parseFloat(t));if(-1===e.indexOf("."))return e;var n=u(Array.from(e.split(".")),2);n[0];return n[1].length<=2?e:parseFloat(t).toFixed(2)},humanizeBytes:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.round,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",r=!0,o=["Bytes","KB","MB","GB","TB"];if(/floor/.test(n)&&(n=Math.floor),0===t)return"0 "+o[0];if(t<0){if(!e)return"0 "+o[0];r=!1,t=-t}var a=parseInt(Math.floor(Math.log(t)/Math.log(1024))),s=(a=a>3?3:a)>2?n(10*t/Math.pow(1024,a),2)/10:n(1*t/Math.pow(1024,a),2),u=s+i+o[a];return r||(u="-"+u),u},formatDatetime:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";if(t){var n=v(t);return n.format(e)}},fileExtension:h,fileName:function(t){if(-1!==t.indexOf(".")){var e=t.split(".");return e.pop(),e.join("")}return t},parseInteger:function(t){return t?isNaN(parseInt(t))?t:parseInt(t):t},parseBoolean:function(t){return"true"===t||"false"!==t&&null},formatBoolean:function(t){return!0===t?"true":!1===t?"false":"null"},secondsToHms:function(t){(!t||t<0)&&(t=0);var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60);return t=t-3600*e-60*n,e<10&&(e="0"+e),n<10&&(n="0"+n),(t=parseInt(t,10))<10&&(t="0"+t),"00"!==e?e+":"+n+":"+t:n+":"+t},fileTypeByExtension:m,wpsPreview:function(t){return"document"==t.type&&"ppt"===m(t)&&window.featureToggles.wps_preview},fileCategoryByResource:function(t){if(t&&t.referrer_type)return"upload"==t.referrer_type&&t.upload?function(t){if(t){var e=m(t);return["video-link"].includes(e)?"link":["word","excel","pdf","ppt"].includes(e)?"document":["subject-lib"].includes(e)?"subject_library":["course-package"].includes(e)?"course_package":e}}(t.upload):"subject-lib"==t.referrer_type?"subject_library":"slide"==t.referrer_type?t.referrer_type:"course-package"==t.referrer_type?"course_package":t.referrer_type},startsWith:function(t,e){return null===t&&(t=""),0===t.lastIndexOf(e,0)},endsWith:function(t,e){null===t&&(t=""),e+="";var n=t.length-e.length;return n>=0&&t.indexOf(e,n)===n},formatFloat:function(t){return!t||isNaN(t)?t:parseFloat(new o(t).toFixed(1))},trackYoutube:function(t,e,n,i,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return st.trackVisit(!0),g(t,e,n,i,"video",o,r,a)},enableTrack:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n&&(n.videoDuration=0);var o=6e4,a=0,s=!1,u=null,d=0,c=function(){if(u)return clearInterval(u),u=null};e.on("loadedmetadata",(function(){e[0]&&n&&(n.videoDuration=e[0].duration),e[0]&&r&&(r.videoDuration=e[0].duration)})),e.on("play",(function(d){a=_(e),window.st.hasVideoPlaying=!0,u||(u=setInterval((function(){var o=_(e);g(t,n,a,o,i,!0,0,r),st.trackVisit(!0),a=o}),o)),!s&&n&&(n.uploads&&n.uploads.length>0&&n.uploads[0].id?st.track(n.type,"view",{activity_id:n.id,upload_id:n.uploads[0].id}):st.track(n.type,"view",{activity_id:n.id}),s=!0)})),e.on("ended",(function(t){c(),s=!1,window.st.hasVideoPlaying=!1})),setInterval((function(){return d=_(e)}),1e3),e.on("pause",(function(e){c(),window.st.hasVideoPlaying&&a<d&&(g(t,n,a,d,i,!0,0,r),st.trackVisit(!0),window.st.hasVideoPlaying=!1)})),e.on("seeking",(function(t){})),e.on("beforeSeeking",(function(e,o){return g(t,n,a,o.timeBeforSeeking,i,!0,0,r)})),e.on("seeked",(function(t){return a=_(e)})),t.$on("$destroy",(function(o){c(),g(t,n,a,_(e),i,!0,0,r),a=_(e)}));var l=function(){c(),window.st.hasVideoPlaying&&(g(t,n,a,_(e),i,!0,0,r),a=_(e))};return f(l)},openPopupAfterCurrentClose:function(t,e){return r(document).on("closed.fndtn.reveal",e,(function n(){return r(t).foundation("reveal","open"),r(document).off("closed.fndtn.reveal",e,n)})),null},getStarCssClass:function(t,e){(null==e||e<1)&&(e=1);return t<=e-1?"font font-whole-star blank-stars":"font font-whole-star"},getAddressJsonPath:function(){var t=r("html").attr("lang");return["en-US","en-GB"].includes(t)?"/static/json/countries-states-cities-regions-en-US.json":["zh-TW","zh-MO"].includes(t)?"/static/json/countries-states-cities-regions-zh_Hans_TW.json":"/static/json/countries-states-cities-regions-zh_Hans_CN.json"},isSupportedOnlineVideoLink:function(t){var e,n=s(C);try{for(n.s();!(e=n.n()).done;){if(e.value.test(t))return!0}}catch(t){n.e(t)}finally{n.f()}return!1},parseOnlineVideoUrl:function(t){var e=b,n=e.exec(t);return n?"//www.youtube.com/embed/".concat(n[7]):(n=(e=I).exec(t))?"https://player.youku.com/embed/".concat(n[1]):(n=(e=k).exec(t))?"https://player.youku.com/embed/".concat(n[4]):(n=(e=x).exec(t))?"https://web.microsoftstream.com/embed/video/".concat(n[2]):(n=(e=T).exec(t))?n[0]:(n=(e=S).exec(t))?"https://player.vimeo.com/video/".concat(n[1]):""},trackResource:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={first_class_id:i.guard(null!=t.classification_dict?t.classification_dict.first:void 0,(function(t){return t.id}))||0,second_class_id:i.guard(null!=t.classification_dict?t.classification_dict.second:void 0,(function(t){return t.id}))||0,third_class_id:i.guard(null!=t.classification_dict?t.classification_dict.third:void 0,(function(t){return t.id}))||0,owner_id:t.created_by_id,resource_id:t.id,dep_id:(null!=t.department?t.department.id:void 0)||0,upload_id:(null!=t.upload?t.upload.id:void 0)||t.referrer_id||0,upload_type:i.guard(null!=t.upload?t.upload.link:void 0,(function(t){return t.type}))||(null!=t.upload?t.upload.type:void 0)||t.referrer_type,tag_ids:t.tags?t.tags.map((function(t){return t.id})):[]};return r=Object.assign(n,r),window.st.track("shared_resource",e,{},r)},intToChar:function(t){return String.fromCharCode(65+t%26)},getSupportedFormats:function(){return A},getAcceptedExtensions:function(){return".".concat(A.join(",."))},base64ToFile:function(t,e,n,i){var r=p.decode(t),o=null;try{o=new File([r],e,{type:n})}catch(t){(o=new Blob([r],{type:n})).name=e}return o},retryTranscode:function(t,e,n,i){return t.post("/api/uploads/".concat(i,"/retranscode")).success(e.decorateSuccess((function(){n.location.reload()}))).error(e.decorateError((function(){})))},setUploadStatus:function(t){return"ready"===t.status||"failed"===t.status?t.status:"processing"===t.status?new Date(t.updated_at).getTime()<(new Date).getTime()-864e5?"failed":"processing":void 0},setUploadsFeature:function(t){if(void 0!==t){var e,n={},i=s(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n[r.id]=this.setUploadStatus(r)}}catch(t){i.e(t)}finally{i.f()}return n}},setUploadFeature:function(t){var e={};return e[t.id]=this.setUploadStatus(t),e},Timer:j,track:g,closePopup:function(t){r("#".concat(t)).foundation("reveal","close")},fixMultiModalOverlay:function(t){r(document).off("closed.fndtn.reveal",t),r(document).on("closed.fndtn.reveal",t,(function(){var t=r(".reveal-modal-bg");r(".reveal-modal.open").length>0&&t.css("display","block")}))},replaceActivityTypeKey:function(t){return(t||"").replace(/_/g,"-")},animateIncreaseWidth:function(t,e){var n="#";t.id_?n+=t.id_:n+=t.id;var i=r(n);i.animate({width:i.width()+e},500)},saveCorrectColumnSetting:function(t,e,n){var i=e+"CorrectColumnSetting",r=JSON.parse(window.localStorage.getItem(i)),o={activityId:t,updateTime:v.utc().unix(),column:n};if(r){var s=a.find(r,{activityId:t});s?(s.updateTime=v.utc().unix(),s.column=n):r.push(o)}else(r=[]).push(o);return window.localStorage.setItem(i,JSON.stringify(r))},loadCorrectColumnSetting:function(t,e){var n=e+"CorrectColumnSetting",i=JSON.parse(window.localStorage.getItem(n));return a.find(i,{activityId:t})}}},816414:(t,e,n)=>{var i=n(904072),r=n(904072),o=n(708468);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n(892222),n(226699),n(603843),n(583710),n(224812),n(369070),n(891058),n(932564);var s=n(203494);!function(t){var e={};"undefined"==typeof XDomainRequest||function(){try{return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){return!1}}()||t.ajaxTransport("+*",(function(t,n,i){var r=void 0,o=void 0,a=function(){o=!0,r&&(delete e[t.url],r.onload=r.onerror=r.ontimeout=r.onprogress=null)};if(t.async&&t.crossDomain)return{send:function(n,i){var s=t.xdrTimeout||6e4;(r=new XDomainRequest).timeout=s,r.open(t.type,t.url),r.onload=function(){o||(a(),i(200,"OK","string"==typeof r.responseText?{text:r.responseText}:"","Content-Type: "+r.contentType))},r.onerror=function(){o||(a(),i(500,"XDomainRequest Error"))},r.ontimeout=function(){o||(a(),i(500,"XDomainRequest Timeout"))},r.onprogress=function(){},r.send(t.hasContent&&t.data||null),e[t.url]=r},abort:function(){r&&!o&&(a(),r.abort())}}}))}(i);var u=function(){"use strict";function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.trackVisit=this.trackVisit.bind(this),this.orgId=e.orgId,this.departmentId=e.departmentId,this.userId=e.userId,this.url=e.server,this.visitStartFrom=Date.now(),this.activityType=null,this.browser=(n=navigator.userAgent.toLowerCase(),/mozilla/.test(n)&&/applewebkit/.test(n)&&/chrome/.test(n)&&/safari/.test(n)&&/opr/.test(n)?"opera":/webkit/.test(n)&&/chrome/.test(n)&&!/edg/.test(n)?"chrome":/mozilla/.test(n)&&/firefox/.test(n)?"firefox":/msie/.test(n)||/trident/.test(n)?"ie":/edg/.test(n)?"edge":/safari/.test(n)&&/applewebkit/.test(n)&&!/chrome/.test(n)?"safari":"others"),this.isTeacher="True"===r("#enrollmentIsInstructor").val(),this.masterCourseId=r("#masterCourseId").val()||0}var e,n,i;return e=t,(n=[{key:"inPage",value:function(t){return this.tags=t}},{key:"setActivityType",value:function(t){return this.activityType=t}},{key:"reset",value:function(){return this.visitStartFrom=Date.now()}},{key:"trackVisit",value:function(t){if(null!=this.userId&&"True"!==r("#isSimulatingInCourse").val()){this.tags=this.tags||{},!("course_id"in this.tags)&&r("#courseId").val()&&(this.tags.course_id=r("#courseId").val());var e=Math.max(parseInt((Date.now()-this.visitStartFrom)/1e3),0);e=e<=86400?e:0;var n=this.tags.course_id,i={user_id:this.userId,org_id:this.orgId,course_id:n,activity_id:this.tags.activity_id,group_id:this.tags.group_id,topic_id:this.tags.topic_id,visit_duration:e,is_teacher:this.isTeacher,browser:this.browser,user_agent:navigator.userAgent},o=this.tags.masterCourseId||r("#masterCourseId").val()||0;i.course_id&&0!==parseInt(i.course_id)&&parseInt(i.course_id)!==parseInt(o)&&(i.master_course_id=parseInt(o)),this.activityType&&(["welink","tencent_meeting","dingtalk_meeting"].includes(this.activityType)?(i.activity_type="meeting",i.meeting_type=this.activityType):i.activity_type=this.activityType),t&&(i.auto_interval=!0),window.statistics.addExtraData(i),this._send("user-visits",i,!1),this.reset()}}},{key:"trackReplyVisit",value:function(t){if(t&&null!=this.userId){var e={user_id:this.userId,org_id:this.orgId,reply_id:t,is_teacher:this.isTeacher,browser:this.browser};return window.statistics.addExtraData(e),this._send("user-reply-visits",e,!1)}}},{key:"track",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.tags=this.tags||{},o.merge(this.tags,n);var a={web_link:"weblinks",material:"materials",homework:"homeworks",forum:"forums",online_video:"online-videos",slide:"slides",lesson:"lessons",exam:"exams",chatroom:"chatrooms",classroom:"classrooms",questionnaire:"questionnaires",page:"pages",scorm:"scorms",interaction:"interactions",bulletin:"bulletins",calendar_event:"calendar-event",forum_file:"forum-file",shared_resource:"shared-resource",personal_resource:"personal-resource",tencent_meeting:"meeting",dingtalk_meeting:"meeting",welink:"meeting",score:"teaching-action"},s={user_id:parseInt(this.userId),org_id:parseInt(this.orgId),course_id:this.tags.course_id||parseInt(r("#courseId").val())||null,bulletin_id:this.tags.bulletin_id,module_id:this.tags.module_id,syllabus_id:this.tags.syllabus_id,activity_id:this.tags.activity_id,upload_id:this.tags.upload_id,upload_reference_id:this.tags.upload_reference_id,calendar_event_id:this.tags.calendar_event_id,topic_id:this.tags.topic_id,category_id:this.tags.category_id,reply_id:this.tags.reply_id||null,comment_id:this.tags.comment_id||null,forum_type:this.tags.forum_type||"",action_type:e,is_teacher:this.tags.is_teacher||"True"===r("#enrollmentIsInstructor").val()||"True"===r("#enrollmentIsInstructorAssistant").val(),is_student:this.tags.is_student||"True"===r("#enrollmentIsStudent").val(),ts:(new Date).getTime(),user_agent:navigator.userAgent,meeting_type:t};for(var u in i){var d=i[u];s[u]=d}var c=this.tags.masterCourseId||r("#masterCourseId").val()||0;return s.course_id&&0!==parseInt(s.course_id)&&parseInt(s.course_id)!==parseInt(c)&&(s.master_course_id=parseInt(c)),"start_at"in s&&"end_at"in s&&(s.duration=s.end_at-s.start_at),window.statistics.addExtraData(s),this._send(a[t],s)}},{key:"_send",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i="".concat(this.url,"/api/").concat(t);return e=JSON.stringify(e),navigator.sendBeacon?navigator.sendBeacon(i,e):r.ajax({type:"POST",url:i,contentType:"application/json; charset=utf-8",processData:!1,dataType:"json",data:e,async:n})}}])&&a(e.prototype,n),i&&a(e,i),t}();window.statisticsSettings&&(window.st=new u(window.statisticsSettings),s(st.trackVisit),r(document).ready((function(){var t=0,e=function(){if(t>=window.statisticsSettings.idleThreshold&&!st.hasVideoPlaying)return st.reset()};return setInterval((function(){return st.hasVideoPlaying||(t+=1),e()}),6e4),r(this).mousemove((function(n){return e(),t=0})),r(this).keypress((function(n){return e(),t=0}))})))}}]);